<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ –ó–º–µ–π–∫–∞</title>
    <meta charset="UTF-8"> 
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #2c3e50;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding-top: 20px;
        }

        #game-board {
            width: 300px;
            height: 300px;
            background-color: #34495e; /* –§–æ–Ω –ø–æ–ª—è */
            border: 5px solid #2ecc71; /* –ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ */
            display: grid;
            /* –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ–ª–µ –Ω–∞ 20x20 –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ */
            grid-template-rows: repeat(20, 1fr);
            grid-template-columns: repeat(20, 1fr);
            margin-bottom: 20px;
        }

        .snake {
            background-color: #2ecc71; /* –¶–≤–µ—Ç –∑–º–µ–π–∫–∏ */
            border: 1px solid #1e8449;
            border-radius: 2px;
        }

        .food {
            background-color: #e74c3c; /* –¶–≤–µ—Ç –µ–¥—ã (–∫—Ä–∞—Å–Ω—ã–π) */
            border-radius: 50%; /* –ö—Ä—É–≥–ª–∞—è –µ–¥–∞ */
        }

        #score {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        #message {
            font-size: 18px;
            color: #f1c40f;
            margin-top: 10px;
            min-height: 20px;
        }
        
        .controls {
            display: grid;
            grid-template-areas:
                ". up ."
                "left . right"
                ". down .";
            gap: 10px;
            width: 150px;
            margin-top: 10px;
        }
        
        .controls button {
            padding: 10px;
            font-size: 18px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #up { grid-area: up; }
        #down { grid-area: down; }
        #left { grid-area: left; }
        #right { grid-area: right; }
    </style>
</head>
<body>

    <h2>üêç –ò–≥—Ä–∞ –ó–º–µ–π–∫–∞</h2>
    
    <div id="score">–°—á–µ—Ç: 0</div>
    
    <div id="game-board">
        </div>
    
    <div id="message">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –Ω–∞—á–∞–ª–∞</div>

    <div class="controls">
        <button id="up" onclick="changeDirection('up')">‚Üë</button>
        <button id="left" onclick="changeDirection('left')">‚Üê</button>
        <button id="right" onclick="changeDirection('right')">‚Üí</button>
        <button id="down" onclick="changeDirection('down')">‚Üì</button>
    </div>

<script>
    const gameBoard = document.getElementById('game-board'); 
    const scoreDisplay = document.getElementById('score');
    const messageDisplay = document.getElementById('message');
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
    const GRID_SIZE = 20; // –†–∞–∑–º–µ—Ä –ø–æ–ª—è 20x20
    let snake = [{ x: 10, y: 10 }]; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∑–º–µ–π–∫–∏ (–≥–æ–ª–æ–≤–∞)
    let food = { x: 5, y: 5 }; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –µ–¥—ã
    let direction = 'right'; // –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    let gameInterval; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
    let score = 0;
    let isPlaying = false;

    // --- –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ò–ì–†–û–ô ---

    // 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    function changeDirection(newDirection) {
        // –ó–∞–ø—Ä–µ—â–∞–µ–º —Ä–µ–∑–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 'right' –Ω–∞ 'left')
        if (newDirection === 'up' && direction !== 'down') direction = newDirection;
        else if (newDirection === 'down' && direction !== 'up') direction = newDirection;
        else if (newDirection === 'left' && direction !== 'right') direction = newDirection;
        else if (newDirection === 'right' && direction !== 'left') direction = newDirection;
        
        // –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –µ–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
        if (!isPlaying) startGame();
    }
    
    // 2. –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    function gameTick() {
        if (!isPlaying) return;

        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É, —Å–¥–≤–∏–≥–∞—è –µ–µ –≤ —Ç–µ–∫—É—â–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
        const head = { x: snake[0].x, y: snake[0].y };

        switch (direction) {
            case 'up': head.y -= 1; break;
            case 'down': head.y += 1; break;
            case 'left': head.x -= 1; break;
            case 'right': head.x += 1; break;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
        if (checkCollision(head)) {
            gameOver();
            return;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
        snake.unshift(head);

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –µ–¥—ã
        if (head.x === food.x && head.y === food.y) {
            score++;
            scoreDisplay.innerText = `–°—á–µ—Ç: ${score}`;
            placeFood(); // –†–∞–∑–º–µ—â–∞–µ–º –Ω–æ–≤—É—é –µ–¥—É
            // –ó–º–µ–π–∫–∞ –Ω–µ —É–∫–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è (—Ç.–µ., —Ä–∞—Å—Ç–µ—Ç)
        } else {
            snake.pop(); // –£–¥–∞–ª—è–µ–º —Ö–≤–æ—Å—Ç (–¥–≤–∏–∂–µ–Ω–∏–µ –±–µ–∑ —Ä–æ—Å—Ç–∞)
        }

        drawGame(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–≥—Ä—É
    }

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
    function checkCollision(head) {
        // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–æ–π
        if (head.x < 0 || head.x >= GRID_SIZE || head.y < 0 || head.y >= GRID_SIZE) {
            return true;
        }
        // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Ö–≤–æ—Å—Ç–æ–º
        for (let i = 1; i < snake.length; i++) {
            if (head.x === snake[i].x && head.y === snake[i].y) {
                return true;
            }
        }
        return false;
    }

    // 4. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –µ–¥—ã –≤ —Å–ª—É—á–∞–π–Ω–æ–º –º–µ—Å—Ç–µ
    function placeFood() {
        let newFood;
        do {
            newFood = {
                x: Math.floor(Math.random() * GRID_SIZE),
                y: Math.floor(Math.random() * GRID_SIZE)
            };
        } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
        
        food = newFood;
    }

    // 5. –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
    function drawGame() {
        gameBoard.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
        
        // –†–∏—Å—É–µ–º –∑–º–µ–π–∫—É
        snake.forEach(segment => {
            const snakeElement = document.createElement('div');
            snakeElement.style.gridRowStart = segment.y + 1; // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ CSS –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 1
            snakeElement.style.gridColumnStart = segment.x + 1;
            snakeElement.classList.add('snake');
            gameBoard.appendChild(snakeElement);
        });

        // –†–∏—Å—É–µ–º –µ–¥—É
        const foodElement = document.createElement('div');
        foodElement.style.gridRowStart = food.y + 1;
        foodElement.style.gridColumnStart = food.x + 1;
        foodElement.classList.add('food');
        gameBoard.appendChild(foodElement);
    }
    
    // 6. –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
    function gameOver() {
        isPlaying = false;
        clearInterval(gameInterval);
        messageDisplay.innerText = `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: ${score}. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä–µ—Å—Ç–∞—Ä—Ç–∞.`;
        // –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –∏–≥—Ä–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ
    }
    
    // 7. –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
    function startGame() {
        snake = [{ x: 10, y: 10 }];
        score = 0;
        direction = 'right';
        scoreDisplay.innerText = `–°—á–µ—Ç: 0`;
        messageDisplay.innerText = '';
        isPlaying = true;
        placeFood();
        drawGame();
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–µ 200–º—Å
        gameInterval = setInterval(gameTick, 200); 
    }

    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    messageDisplay.innerText = '–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞.';

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –±—É–¥–µ—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ü–ö)
    document.addEventListener('keydown', e => {
        switch (e.key) {
            case 'ArrowUp': changeDirection('up'); break;
            case 'ArrowDown': changeDirection('down'); break;
            case 'ArrowLeft': changeDirection('left'); break;
            case 'ArrowRight': changeDirection('right'); break;
        }
    });
</script>

</body>
</html>
